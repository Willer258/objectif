<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Données JSON depuis Google Sheets</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 8px;
      text-align: left;
    }
    th {
      background-color: #f2f2f2;
    }


    .epprouvette {
      width: 50px;
      height: 200px;
      border: 3px solid #555;
      border-radius: 10px;
      position: relative;
      overflow: hidden;
      background-color: #e0e0e0;
    }
    
    .niveau {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 0;
      background-color: #4caf50;
      transition: height 0.5s ease;
    }
  </style>
</head>
<body>

  <h1>Données Google Sheets</h1>
  <table id="data-table">
    <thead></thead>
    <tbody></tbody>
  </table>

  <div class="epprouvette">
    <div class="niveau" id="niveau"></div>
  </div>


  <script>
    const apiUrl = 'https://script.googleusercontent.com/a/macros/wiassur.com/echo?user_content_key=0tpVJDfiKg1JFE5g7_C0oNv64jwWiLQKOHdsOJBERvDWhpKRLV_3pjsFGJoVddyotYMbHpbNqaCj-9wo7SqQ6cXfOUuLH19fm5_BxDlH2jW0nuo2oDemN9CCS2h10ox_nRPgeZU6HP-o37QVoniWljl6Ik47hUqRHT_Esuc5rszJvH-rJXwaNxHK8MgFrYyUgNmlJWva0XuqMTic1mH0vVDt5HQjKl4z5PODTLTamnhWYebVgXe2VZ7PxSqiab2GvJsw0wqpxiI&lib=MhIuDqUdkD-56_q02PXXKxDeq61UZLkcC';  // Remplace par l'URL de ton application Web

    function remplirEpprouvette(data) {
      console.log(data);
      const total = 200000000
      const niveau = document.getElementById('niveau');
      console.log((data*100)/total);
      niveau.style.height = `${(data*100)/total}%`;
    }
    // Fonction pour charger et afficher les données
    fetch(apiUrl, { mode: 'no-cors' })
      .then(response => response.json())
      .then(data => {
        const tableHead = document.querySelector('#data-table thead');
        const tableBody = document.querySelector('#data-table tbody');

        // Ajouter les en-têtes
        const headers = Object.keys(data[0]);
        const headerRow = document.createElement('tr');
        headers.forEach(header => {
          const th = document.createElement('th');
          th.textContent = header;
          headerRow.appendChild(th);
        });
        tableHead.appendChild(headerRow);
        
        remplirEpprouvette(data[0].totalWafa)
        
        // Ajouter les lignes de données
        data.forEach(row => {
          const tr = document.createElement('tr');
          headers.forEach(header => {
            const td = document.createElement('td');
            td.textContent = row[header];
            tr.appendChild(td);
          });
          tableBody.appendChild(tr);
        });
      })
      .catch(error => console.error('Erreur :', error));
  </script>

</body>
</html>



fetch(apiUrl, { mode: 'no-cors' })
.then(response => response.json())
.then(data => {
  console.log(data,'dara');
  // Assure-toi que les données contiennent les valeurs correctes
  if (data && data[0]) {
    remplirProgression(data); // Appelle avec les données API
  }
})
.catch(error => console.error('Erreur :', error));